% Auto-generated by cameraCalibrator app on 30-Sep-2021
%-------------------------------------------------------


% Define images to process
% imageFileNames = {'/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image81.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image82.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image83.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image84.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image85.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image86.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image87.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image88.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image89.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image90.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image91.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image92.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image93.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image94.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image95.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image96.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image97.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image98.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image99.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image100.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image101.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image102.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image103.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image104.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image105.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image106.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image107.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image108.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image112.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image113.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image114.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image115.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image116.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image117.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image118.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image119.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image120.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image121.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image122.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image123.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image125.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image126.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image127.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image128.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image129.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image132.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image133.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image134.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image135.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image136.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image137.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image139.png',...
%     '/home/jorobinson/RBE3001_Matlab11/camera_calibration/Image140.png',...
%     };

imageFileNames = {'/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image81.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image82.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image83.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image84.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image85.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image86.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image87.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image88.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image89.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image90.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image91.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image92.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image93.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image94.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image95.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image96.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image97.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image98.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image99.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image100.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image101.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image102.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image103.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image104.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image105.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image106.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image107.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image108.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image112.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image113.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image114.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image115.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image116.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image117.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image118.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image119.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image120.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image121.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image122.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image123.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image125.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image126.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image127.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image128.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image129.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image132.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image133.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image134.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image135.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image136.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image137.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image139.png',...
    '/home/lerinaldi/RBE3001_Matlab11/camera_calibration/Image140.png',...
    };

% imageFileNames = {'/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image81.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image82.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image83.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image84.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image85.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image86.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image87.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image88.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image89.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image90.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image91.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image92.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image93.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image94.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image95.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image96.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image97.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image98.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image99.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image100.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image101.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image102.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image103.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image104.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image105.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image106.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image107.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image108.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image112.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image113.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image114.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image115.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image116.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image117.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image118.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image119.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image120.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image121.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image122.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image123.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image125.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image126.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image127.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image128.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image129.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image132.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image133.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image134.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image135.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image136.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image137.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image139.png',...
%     '/home/hesmaeili/RBE3001_Matlab11/camera_calibration/Image140.png',...
%     };
% Detect checkerboards in images
[imagePoints, boardSize, imagesUsed] = detectCheckerboardPoints(imageFileNames);
imageFileNames = imageFileNames(imagesUsed);

% Read the first image to obtain image size
originalImage = imread(imageFileNames{1});
[mrows, ncols, ~] = size(originalImage);

% Generate world coordinates of the corners of the squares
squareSize = 25;  % in units of 'millimeters'
worldPoints = generateCheckerboardPoints(boardSize, squareSize);

% Calibrate the camera using fisheye parameters
[cameraParams, imagesUsed, estimationErrors] = estimateFisheyeParameters(imagePoints, worldPoints, ...
    [mrows, ncols], ...
    'EstimateAlignment', false, ...
    'WorldUnits', 'millimeters');

% View reprojection errors
h1=figure; showReprojectionErrors(cameraParams);

% Visualize pattern locations
h2=figure; showExtrinsics(cameraParams, 'CameraCentric');

% Display parameter estimation errors
displayErrors(estimationErrors, cameraParams);

% For example, you can use the calibration data to remove effects of lens distortion.
undistortedImage = undistortFisheyeImage(originalImage, cameraParams.Intrinsics);

% See additional examples of how to use the calibration data.  At the prompt type:
% showdemo('MeasuringPlanarObjectsExample')
% showdemo('StructureFromMotionExample')
